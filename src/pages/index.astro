---
import BaseLayout from '@/layouts/BaseLayout.astro';
import NewsletterForm from '@/components/react/NewsletterForm';
import ThemeToggle from '@/components/react/ThemeToggle';
import LanguageSwitcher from '@/components/react/LanguageSwitcher';
import ProgressBar from '@/components/react/ProgressBar';
import { getLocaleFromUrl, getLocalizedPath } from '@/lib/i18n';
import en from '@/locales/en';
import fr from '@/locales/fr';
import de from '@/locales/de';
import es from '@/locales/es';
import it from '@/locales/it';
import nl from '@/locales/nl';

const locale = getLocaleFromUrl(Astro.url) || 'en';

// Generate language URLs for the language switcher
const languageUrls = {
  en: getLocalizedPath('/', 'en'),
  fr: getLocalizedPath('/', 'fr'),
  de: getLocalizedPath('/', 'de'),
  es: getLocalizedPath('/', 'es'),
  it: getLocalizedPath('/', 'it'),
  nl: getLocalizedPath('/', 'nl'),
};

// Get the correct translations based on locale
const translations = {
  en,
  fr,
  de,
  es,
  it,
  nl,
};

const t = translations[locale as keyof typeof translations] || en;

// SEO-optimized keywords for TCG market
const keywords = [
  'trading card game platform',
  'TCG collection manager',
  'European card marketplace',
  'digital card trading',
  'TCG price tracker',
  'card inventory system',
  'collectible card database',
  'TCG community platform',
  'card trading app',
  'European TCG market'
];

const features = [
  {
    icon: 'üì±',
    title: t.underConstruction.features.mobile.title,
    description: t.underConstruction.features.mobile.description,
    benefits: ['Real-time sync', 'Offline access', 'Push notifications']
  },
  {
    icon: 'üìö',
    title: t.underConstruction.features.collection.title,
    description: t.underConstruction.features.collection.description,
    benefits: ['Smart organization', 'Advanced filters', 'Detailed analytics']
  },
  {
    icon: 'üåç',
    title: t.underConstruction.features.marketplace.title,
    description: t.underConstruction.features.marketplace.description,
    benefits: ['Secure trading', 'Price tracking', 'Market insights']
  },
  {
    icon: 'üîí',
    title: t.underConstruction.features.privacy.title,
    description: t.underConstruction.features.privacy.description,
    benefits: ['GDPR compliant', 'Encrypted data', 'Privacy controls']
  },
  {
    icon: 'üó£Ô∏è',
    title: t.underConstruction.features.multilingual.title,
    description: t.underConstruction.features.multilingual.description,
    benefits: ['6 languages', 'Local support', 'Cultural adaptation']
  },
];

const progressItems = [
  { name: t.underConstruction.progress.design, progress: 85, color: 'bg-blue-500' },
  { name: t.underConstruction.progress.backend, progress: 60, color: 'bg-green-500' },
  { name: t.underConstruction.progress.mobile, progress: 40, color: 'bg-purple-500' },
  { name: t.underConstruction.progress.testing, progress: 25, color: 'bg-orange-500' },
  { name: t.underConstruction.progress.launch, progress: 10, color: 'bg-red-500' },
];

// Enhanced structured data for better SEO
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": t.underConstruction.title,
  "description": t.underConstruction.description,
  "mainEntity": {
    "@type": "SoftwareApplication",
    "name": "EuroTCG",
    "applicationCategory": "CollectionApplication",
    "applicationSubCategory": "Trading Card Game Management",
    "operatingSystem": ["iOS", "Android", "Web"],
    "description": t.underConstruction.description,
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "EUR",
      "availability": "InStock"
    },
    "author": {
      "@type": "Organization",
      "name": "EuroTCG Team"
    },
    "featureList": features.map(f => f.title),
    "audience": {
      "@type": "Audience",
      "audienceType": "TCG Collectors and Traders"
    }
  }
};
---

<BaseLayout
  title={t.underConstruction.title}
  description={t.underConstruction.description}
  locale={locale}
  structuredData={structuredData}
  keywords={keywords}
>
  <!-- Professional Navigation Header -->
  <header class="sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
    <div class="container mx-auto px-4">
      <div class="flex h-16 items-center justify-between">
        <!-- Logo Section -->
        <div class="flex items-center space-x-4">
          <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-primary/80 text-primary-foreground font-bold text-xl shadow-lg">
            E
          </div>
          <div class="flex flex-col">
            <span class="text-xl font-bold text-foreground">EuroTCG</span>
            <span class="text-xs text-muted-foreground">European Trading Platform</span>
          </div>
        </div>
        
        <!-- Navigation Items (for future use) -->
        <nav class="hidden md:flex items-center space-x-6">
          <a href="#features" class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors">Features</a>
          <a href="#progress" class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors">Progress</a>
          <a href="#community" class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors">Community</a>
        </nav>
        
        <!-- Controls -->
        <div class="flex items-center gap-3">
          <LanguageSwitcher client:load currentLocale={locale} languageUrls={languageUrls} />
          <ThemeToggle client:load />
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="relative">
    <!-- Hero Section with TCGPlayer-inspired design -->
    <section class="relative overflow-hidden bg-gradient-to-br from-background via-background to-muted/20">
      <!-- Background Elements -->
      <div class="absolute inset-0">
        <div class="absolute left-1/4 top-1/4 h-72 w-72 rounded-full bg-primary/5 blur-3xl"></div>
        <div class="absolute right-1/4 bottom-1/4 h-96 w-96 rounded-full bg-accent/5 blur-3xl"></div>
      </div>
      
      <div class="container mx-auto px-4 py-20 lg:py-32">
        <div class="mx-auto max-w-4xl text-center">
          <!-- Status Badge -->
          <div class="mb-8 inline-flex items-center gap-2 rounded-full border border-primary/20 bg-primary/10 px-6 py-3 text-sm font-medium text-primary">
            <div class="relative h-2 w-2 rounded-full bg-primary">
              <div class="absolute inset-0 rounded-full bg-primary animate-ping"></div>
            </div>
            {t.underConstruction.comingSoon}
          </div>
          
          <!-- Main Heading -->
          <h1 class="mb-6 text-5xl font-bold tracking-tight text-foreground sm:text-6xl lg:text-7xl">
            <span class="bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
              Europe's Premier
            </span>
            <br />
            <span class="text-foreground">TCG Platform</span>
          </h1>
          
          <!-- Value Proposition -->
          <p class="mb-8 text-xl text-muted-foreground sm:text-2xl max-w-3xl mx-auto leading-relaxed">
            The ultimate collection manager and marketplace for European trading card game enthusiasts
          </p>
          
          <!-- Key Benefits -->
          <div class="mb-12 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl mx-auto">
            <div class="text-center">
              <div class="text-2xl mb-2">üöÄ</div>
              <p class="text-sm font-medium text-foreground">Launch Q2 2025</p>
            </div>
            <div class="text-center">
              <div class="text-2xl mb-2">üåç</div>
              <p class="text-sm font-medium text-foreground">6 European Languages</p>
            </div>
            <div class="text-center">
              <div class="text-2xl mb-2">üÜì</div>
              <p class="text-sm font-medium text-foreground">Free to Use</p>
            </div>
          </div>
          
          <!-- Newsletter Signup -->
          <div class="mb-8">
            <NewsletterForm client:load locale={locale} />
          </div>
          
          <!-- Early Access Info -->
          <p class="text-sm text-muted-foreground">
            Join <span class="font-semibold text-primary">500+</span> collectors already waiting for early access
          </p>
        </div>
      </div>
    </section>
    
    <!-- Features Section -->
    <section id="features" class="py-20 lg:py-32 bg-muted/20">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-bold text-foreground mb-4 sm:text-4xl">
            Built for Modern TCG Collectors
          </h2>
          <p class="text-lg text-muted-foreground max-w-2xl mx-auto">
            Everything you need to manage, trade, and track your trading card collection in one powerful platform
          </p>
        </div>
        
        <div class="grid gap-8 lg:grid-cols-2 xl:grid-cols-3 max-w-7xl mx-auto">
          {features.map((feature, index) => (
            <article class="group relative rounded-2xl border border-border bg-card p-8 shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
              <div class="text-4xl mb-6">{feature.icon}</div>
              <h3 class="text-xl font-semibold text-card-foreground mb-3">
                {feature.title}
              </h3>
              <p class="text-muted-foreground mb-6 leading-relaxed">
                {feature.description}
              </p>
              <ul class="space-y-2">
                {feature.benefits.map((benefit) => (
                  <li class="flex items-center text-sm text-muted-foreground">
                    <svg class="h-4 w-4 text-primary mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    {benefit}
                  </li>
                ))}
              </ul>
            </article>
          ))}
        </div>
      </div>
    </section>
    
    <!-- Progress Section -->
    <section id="progress" class="py-20 lg:py-32">
      <div class="container mx-auto px-4">
        <div class="mx-auto max-w-4xl">
          <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-foreground mb-4 sm:text-4xl">
              Development Progress
            </h2>
            <p class="text-lg text-muted-foreground">
              Track our journey as we build the future of European TCG trading
            </p>
          </div>
          
          <div class="space-y-8">
            {progressItems.map((item, index) => (
              <div class="relative">
                <div class="flex items-center justify-between mb-3">
                  <h3 class="font-semibold text-foreground">{item.name}</h3>
                  <span class="text-sm font-medium text-muted-foreground">{item.progress}%</span>
                </div>
                <ProgressBar
                  client:load
                  label={item.name}
                  progress={item.progress}
                  delay={200 + index * 100}
                  className="h-3"
                />
              </div>
            ))}
          </div>
          
          <div class="text-center mt-12">
            <p class="text-sm font-medium text-primary mb-2">
              {t.underConstruction.estimatedLaunch}
            </p>
            <div class="flex justify-center">
              <div class="h-1 w-48 bg-gradient-to-r from-primary to-accent rounded-full"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Community Section -->
    <section id="community" class="py-20 lg:py-32 bg-muted/20">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold text-foreground mb-4 sm:text-4xl">
          Join the Community
        </h2>
        <p class="text-lg text-muted-foreground mb-12 max-w-2xl mx-auto">
          Connect with fellow collectors, stay updated on development, and be first to access new features
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-12">
          <a 
            href="https://discord.gg/eurotcg" 
            class="group flex flex-col items-center p-8 rounded-2xl border border-border bg-card hover:bg-accent/5 transition-all duration-300 hover:-translate-y-1"
            aria-label="Join our Discord community"
          >
            <div class="w-16 h-16 bg-[#5865F2] rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
              <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/>
              </svg>
            </div>
            <h3 class="font-semibold text-foreground mb-2">Discord</h3>
            <p class="text-sm text-muted-foreground">Real-time chat & updates</p>
          </a>
          
          <a 
            href="https://twitter.com/eurotcg" 
            class="group flex flex-col items-center p-8 rounded-2xl border border-border bg-card hover:bg-accent/5 transition-all duration-300 hover:-translate-y-1"
            aria-label="Follow us on Twitter"
          >
            <div class="w-16 h-16 bg-[#1DA1F2] rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
              <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"/>
              </svg>
            </div>
            <h3 class="font-semibold text-foreground mb-2">Twitter</h3>
            <p class="text-sm text-muted-foreground">Latest news & announcements</p>
          </a>
          
          <a 
            href="https://github.com/eurotcg" 
            class="group flex flex-col items-center p-8 rounded-2xl border border-border bg-card hover:bg-accent/5 transition-all duration-300 hover:-translate-y-1"
            aria-label="Follow us on GitHub"
          >
            <div class="w-16 h-16 bg-[#333] rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
              <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/>
              </svg>
            </div>
            <h3 class="font-semibold text-foreground mb-2">GitHub</h3>
            <p class="text-sm text-muted-foreground">Open source development</p>
          </a>
        </div>
        
        <div class="text-center">
          <h3 class="text-lg font-semibold text-foreground mb-4">Get in Touch</h3>
          <a 
            href="mailto:hello@eurotcg.com"
            class="inline-flex items-center justify-center rounded-lg bg-primary px-8 py-3 text-sm font-medium text-primary-foreground hover:bg-primary/90 transition-colors"
          >
            Contact Us
          </a>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  /* Enhanced animations and effects */
  @keyframes pulse-ring {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }
  
  .animate-pulse-ring {
    animation: pulse-ring 2s ease-out infinite;
  }
  
  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }
  
  /* Focus styles for accessibility */
  :focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
  }
  
  /* Better hover effects */
  .hover-lift {
    transition: transform 0.2s ease-out;
  }
  
  .hover-lift:hover {
    transform: translateY(-4px);
  }
</style>